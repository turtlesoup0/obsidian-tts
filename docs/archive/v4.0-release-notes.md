# π‰ Obsidian TTS v4.0 Release Notes

**λ¦΄λ¦¬μ¤ μΌμ**: 2026-01-22
**λ²„μ „**: 4.0.0
**μ»¤λ°‹**: eb03555

---

## β¨ μ£Όμ” μ‹ κ· κΈ°λ¥

### 1. βοΈ Azure Blob Storage κΈ°λ° λ””λ°”μ΄μ¤ κ°„ μΊμ‹ κ³µμ 

**λ¬Έμ μ  (v3.x)**:
- λΈλΌμ°μ € Cache API μ‚¬μ©μΌλ΅ λ””λ°”μ΄μ¤λ³„λ΅ λ…λ¦½μ μΈ μΊμ‹
- PCμ—μ„ μƒμ„±ν• μΊμ‹λ¥Ό νƒλΈ”λ¦Ώ/μ¤λ§νΈν°μ—μ„ μ‚¬μ© λ¶κ°€
- λ””λ°”μ΄μ¤λ§λ‹¤ μ²μλ¶€ν„° TTS μƒμ„± ν•„μ”

**ν•΄κ²° (v4.0)**:
```
λΈλΌμ°μ € Cache API β†’ Azure Blob Storageλ΅ μ „ν™
```

**ν¨κ³Ό**:
- β… PC, νƒλΈ”λ¦Ώ, μ¤λ§νΈν° λ“± **λ¨λ“  λ””λ°”μ΄μ¤μ—μ„ μΊμ‹ κ³µμ **
- β… ν• λ² μƒμ„±ν• μμ„±μ€ μκµ¬μ μΌλ΅ μ¬μ‚¬μ©
- β… 30μΌ TTL μλ™ κ΄€λ¦¬
- β… μ‹¤μ‹κ°„ μΊμ‹ ννΈμ¨ μ¶”μ 

**μμ‹**:
```
[PCμ—μ„ μ²« μ¬μƒ]
λ…ΈνΈ 1: API β†’ π μƒλ΅ μƒμ„± (2μ΄) β†’ βοΈ μ„λ²„μ— μΊμ‹
λ…ΈνΈ 2: REST β†’ π μƒλ΅ μƒμ„± (2μ΄) β†’ βοΈ μ„λ²„μ— μΊμ‹

[μ¤λ§νΈν°μ—μ„ μ¬μƒ]
λ…ΈνΈ 1: API β†’ π’Ύ μ„λ²„ μΊμ‹ HIT (0.1μ΄) β΅
λ…ΈνΈ 2: REST β†’ π’Ύ μ„λ²„ μΊμ‹ HIT (0.1μ΄) β΅
```

---

### 2. π”„ λ§μ§€λ§‰ μ¬μƒ μ„μΉ μλ™ μ¬κ°

**λ¬Έμ μ  (v3.x)**:
- "μ¬μƒ μ‹μ‘" ν΄λ¦­ μ‹ ν•­μƒ μ²« λ²μ§Έ λ…ΈνΈλ¶€ν„° μ‹μ‘
- μ¤‘κ°„μ— λ©μ·„λ‹¤κ°€ μ¬μ‹μ‘ν•λ©΄ μ²μλ¶€ν„° λ‹¤μ‹ λ“¤μ–΄μ•Ό ν•¨

**ν•΄κ²° (v4.0)**:
- LocalStorageμ— λ§μ§€λ§‰ μ¬μƒ μ„μΉ μ €μ¥
- "μ¬μƒ μ‹μ‘" ν΄λ¦­ μ‹ **λ§μ§€λ§‰ λ…ΈνΈμ λ‹¤μ**λ¶€ν„° μλ™ μ‹μ‘
- λ¨λ“  λ…ΈνΈ μ™„λ£ μ‹ μ²μλ¶€ν„° μ¬μ‹μ‘

**μμ‹**:
```
[μ²« λ²μ§Έ μ„Έμ…]
λ…ΈνΈ 1: API β…
λ…ΈνΈ 2: REST β…
λ…ΈνΈ 3: HTTP β…
(μ‚¬μ©μκ°€ μ¤‘μ§€)

[λ‘ λ²μ§Έ μ„Έμ… - "μ¬μƒ μ‹μ‘" ν΄λ¦­]
λ…ΈνΈ 4: JSONλ¶€ν„° μλ™ μ‹μ‘ β΅
λ…ΈνΈ 5: XML β…
...
```

**UI ν‘μ‹**:
```
π’Ύ λ§μ§€λ§‰ μ¬μƒ: 3λ² - HTTP
λ‹¤μ μ¬μƒ μ‹ 4λ²λ¶€ν„° μ‹μ‘λ©λ‹λ‹¤
```

---

### 3. π― λ³Όλ“ ν…μ¤νΈ μ•…μ„ΌνΈ μ μ©

**λ¬Έμ μ  (v3.x)**:
- λ§ν¬λ‹¤μ΄ λ³Όλ“(**κ°•μ΅°**)κ°€ μΌλ° ν…μ¤νΈλ΅ λ³€ν™
- μ¤‘μ”ν• ν‚¤μ›λ“ κ°•μ΅° λ¶κ°€λ¥

**ν•΄κ²° (v4.0)**:
```markdown
**μ¤‘μ”ν• ν‚¤μ›λ“** β†’ SSML <emphasis level="strong">μ¤‘μ”ν• ν‚¤μ›λ“</emphasis>
```

**ν¨κ³Ό**:
- β… Azure Neural Voiceμ μμ—°μ¤λ¬μ΄ κ°•μ΅° ν‘ν„
- β… μ¤‘μ”ν• κ°λ…/ν‚¤μ›λ“λ¥Ό μμ„±μΌλ΅ κ°•μ΅°
- β… ν•™μµ ν¨μ¨μ„± ν–¥μƒ

**λ°±μ—”λ“ μ²λ¦¬**:
- `shared/textCleaner.js`: λ³Όλ“ λ§ν¬λ‹¤μ΄ β†’ SSML emphasis λ³€ν™
- `shared/ssmlBuilder.js`: emphasis νƒκ·Έ λ³΄νΈ μ²λ¦¬

**μμ‹**:
```
μ…λ ¥: "APIλ” **Application Programming Interface**μ μ•½μμ…λ‹λ‹¤."
μ¶λ ¥ μμ„±: "APIλ” [κ°•μ΅°] Application Programming Interface [/κ°•μ΅°]μ μ•½μμ…λ‹λ‹¤."
```

---

### 4. π”’ λ³΄μ• κ°•ν™”

**κ²€ν†  ν•­λ©**:
- β… `.env` νμΌ: `.gitignore`μ— ν¬ν•¨ (λ³΄νΈλ¨)
- β… `local.settings.json`: `.gitignore`μ— ν¬ν•¨ (λ³΄νΈλ¨)
- β… API μ—”λ“ν¬μΈνΈ: νΌλΈ”λ¦­ URL (λ¬Έμ μ—†μ)
- β… Azure ν‚¤κ°’: ν™κ²½ λ³€μλ΅λ§ κ΄€λ¦¬

**κ²°κ³Ό**:
- λ―Όκ° μ •λ³΄ Git λ…Έμ¶ μ—†μ
- ν™κ²½ λ³€μλ§ Azure Portalμ—μ„ κ΄€λ¦¬
- ν”„λ΅ νΈμ—”λ“λ” κ³µκ° API URLλ§ μ‚¬μ©

---

## π“‚ λ³€κ²½λ νμΌ

### λ°±μ—”λ“ (obsidian-tts/)

#### μμ •λ νμΌ:
1. **`shared/textCleaner.js`**
   - λ³Όλ“ λ§ν¬λ‹¤μ΄(`**ν…μ¤νΈ**`) β†’ SSML `<emphasis>` λ³€ν™
   - κΈ°μ΅΄ λ§ν¬λ‹¤μ΄ μ κ±° λ΅μ§ μ μ§€

2. **`shared/ssmlBuilder.js`**
   - `escapeXML()` ν•¨μμ—μ„ emphasis νƒκ·Έ λ³΄νΈ μ²λ¦¬
   - SSML μƒμ„± μ‹ νƒκ·Έ κµ¬μ΅° μ μ§€

3. **`src/functions/cache.js`** (κΈ°μ΅΄ νμΌ)
   - Azure Blob Storage μΊμ‹± API
   - GET/PUT `/api/cache/{hash}`

#### μ¶”κ°€λ νμΌ:
1. **`CHANGELOG.md`**
   - λ²„μ „λ³„ λ³€κ²½ μ΄λ ¥ λ¬Έμ„

#### μ—…λ°μ΄νΈλ νμΌ:
1. **`README.md`**
   - v4.0 κΈ°λ¥ μ„¤λ… μ¶”κ°€
   - ν”„λ΅μ νΈ κµ¬μ΅° μ—…λ°μ΄νΈ

2. **`.env.example`**
   - Storage μ—°κ²° λ¬Έμμ—΄ μμ‹ μ¶”κ°€

---

### ν”„λ΅ νΈμ—”λ“ (Obsidian Vault)

#### μ‹ κ· νμΌ:
1. **`TTS μ¶μ μμƒ μ½κΈ° v4 (Enhanced).md`**
   - μ„λ²„ μΊμ‹ λ§¤λ‹μ € (`window.serverCacheManager`)
   - λ§μ§€λ§‰ μ¬μƒ μ„μΉ μ¶”μ 
   - λ³Όλ“ ν…μ¤νΈ κ°•μ΅° μ²λ¦¬
   - μ‹¤μ‹κ°„ μΊμ‹ ν†µκ³„ UI

---

## π€ λ°°ν¬ λ°©λ²•

### 1λ‹¨κ³„: λ°±μ—”λ“ λ°°ν¬

```bash
# λ΅μ»¬μ—μ„ μµμ‹  μ½”λ“ pull
cd /Users/turtlesoup0/Documents/obsidian-tts
git pull origin main

# Azure Functions λ°°ν¬
func azure functionapp publish <your-function-app-name>
```

### 2λ‹¨κ³„: ν™κ²½ λ³€μ μ„¤μ •

Azure Portal β†’ Function App β†’ Configurationμ—μ„ μ¶”κ°€:

```
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;...
```

### 3λ‹¨κ³„: Azure Storage μ»¨ν…μ΄λ„ μƒμ„±

```bash
az storage container create \
  --name tts-cache \
  --account-name <your-storage-account> \
  --public-access blob
```

### 4λ‹¨κ³„: ν”„λ΅ νΈμ—”λ“ μ‚¬μ©

Obsidianμ—μ„ `TTS μ¶μ μμƒ μ½κΈ° v4 (Enhanced).md` νμΌ μ—΄κΈ°

---

## π§ ν…μ¤νΈ λ°©λ²•

### 1. λ””λ°”μ΄μ¤ κ°„ μΊμ‹ κ³µμ  ν…μ¤νΈ

**PCμ—μ„**:
1. v4 λ…ΈνΈ μ—΄κΈ°
2. F12 (μ½μ†”) μ—΄κΈ°
3. "μ¬μƒ μ‹μ‘" ν΄λ¦­
4. μ½μ†”μ—μ„ ν™•μΈ:
   ```
   π“¥ Checking server cache: abc123...
   β οΈ Server cache MISS: abc123...
   π Azure TTS API νΈμ¶ μ‹μ‘
   π“¤ Saving to server cache: abc123...
   β… Server cached: abc123...
   ```

**νƒλΈ”λ¦Ώ/μ¤λ§νΈν°μ—μ„**:
1. λ™μΌν• λ…ΈνΈ μ—΄κΈ°
2. "μ¬μƒ μ‹μ‘" ν΄λ¦­
3. μ½μ†”μ—μ„ ν™•μΈ:
   ```
   π“¥ Checking server cache: abc123...
   π’Ύ Server cache HIT: abc123... β΅
   π’Ύ Using cached audio (12345 bytes)
   ```

### 2. μλ™ μ¬κ° ν…μ¤νΈ

1. "μ¬μƒ μ‹μ‘" ν΄λ¦­ β†’ 3λ² λ…ΈνΈκΉμ§€ μ¬μƒ
2. "μ •μ§€" ν΄λ¦­
3. νμ΄μ§€ μƒλ΅κ³ μΉ¨ λλ” Obsidian μ¬μ‹μ‘
4. λ‹¤μ‹ "μ¬μƒ μ‹μ‘" ν΄λ¦­
5. **4λ² λ…ΈνΈλ¶€ν„° μλ™ μ‹μ‘ ν™•μΈ** β…

### 3. λ³Όλ“ κ°•μ΅° ν…μ¤νΈ

λ…ΈνΈμ— λ‹¤μ λ‚΄μ© μ¶”κ°€:
```markdown
μ •μ: APIλ” **Application Programming Interface**μ μ•½μλ΅, **μ†ν”„νΈμ›¨μ–΄ κ°„ ν†µμ‹ **μ„ κ°€λ¥ν•κ² ν•©λ‹λ‹¤.
```

μ¬μƒ μ‹ "Application Programming Interface"μ™€ "μ†ν”„νΈμ›¨μ–΄ κ°„ ν†µμ‹ "μ΄ κ°•μ΅°λμ–΄ λ“¤λ¦Ό β…

---

## π“ μ„±λ¥ λΉ„κµ

### v3.x (λΈλΌμ°μ € μΊμ‹)
```
[PC μ²« μ¬μƒ] 100κ° λ…ΈνΈ Γ— 2μ΄ = 200μ΄
[PC λ‘ λ²μ§Έ] 100κ° λ…ΈνΈ Γ— 0.1μ΄ = 10μ΄ (μΊμ‹)
[μ¤λ§νΈν° μ²« μ¬μƒ] 100κ° λ…ΈνΈ Γ— 2μ΄ = 200μ΄ (μΊμ‹ μ—†μ!)
```

### v4.0 (μ„λ²„ μΊμ‹)
```
[PC μ²« μ¬μƒ] 100κ° λ…ΈνΈ Γ— 2μ΄ = 200μ΄
[PC λ‘ λ²μ§Έ] 100κ° λ…ΈνΈ Γ— 0.1μ΄ = 10μ΄ (μ„λ²„ μΊμ‹)
[μ¤λ§νΈν° μ²« μ¬μƒ] 100κ° λ…ΈνΈ Γ— 0.1μ΄ = 10μ΄ (μ„λ²„ μΊμ‹!) β΅
```

**κ°μ„  ν¨κ³Ό**: μ¤λ§νΈν° μ²« μ¬μƒ μ‹κ°„ 95% λ‹¨μ¶• (200μ΄ β†’ 10μ΄)

---

## π’° λΉ„μ© μν–¥

### Azure Storage μ¶”κ°€ λΉ„μ©
- **Blob Storage**: 5GB λ¬΄λ£ (μΊμ‹ ν¬κΈ°: ~1-2GB)
- **νΈλμ­μ…**: 20,000ν/μ›” λ¬΄λ£ (μ¶©λ¶„ν•¨)
- **μ¶”κ°€ λΉ„μ©**: **0μ›** (λ¬΄λ£ λ²”μ„ λ‚΄)

### κΈ°μ΅΄ λΉ„μ© (λ³€λ™ μ—†μ)
- Speech TTS: μ›” 50λ§μ λ¬΄λ£
- Functions: μ›” 100λ§ μ‹¤ν–‰ λ¬΄λ£

---

## π“ μ‚¬μ© μ‹λ‚λ¦¬μ¤

### μ¶ν‡΄κ·Ό ν•™μµ
```
[μ•„μΉ¨ - PCμ—μ„ μƒμ„±]
μ¶κ·Ό μ „ PCμ—μ„ 100κ° λ…ΈνΈ μ¬μƒ β†’ λ¨λ‘ μ„λ²„μ— μΊμ‹±

[μ €λ… - μ¤λ§νΈν°μ—μ„ μ¬μƒ]
ν‡΄κ·ΌκΈΈ μ¤λ§νΈν°μΌλ΅ λ³µμµ β†’ λ¨λ‘ μΊμ‹ ννΈ β΅
μ¤ν”„λΌμΈμ—μ„λ„ λΉ λ¥Έ λ΅λ”©
```

### μ¤‘λ‹¨ ν›„ μ¬κ°
```
[μ²« λ²μ§Έ μ„Έμ…]
λ…ΈνΈ 1-50 μ¬μƒ ν›„ μ¤‘λ‹¨

[λ‘ λ²μ§Έ μ„Έμ…]
"μ¬μƒ μ‹μ‘" β†’ μλ™μΌλ΅ 51λ²λ¶€ν„° μ‹μ‘ π”„
```

### μ¤‘μ” κ°λ… κ°•μ΅°
```
μ •μ: **REST API**λ” **Representational State Transfer**μ μ•½μμ…λ‹λ‹¤.

μμ„± μ¶λ ¥:
"REST APIλ” [κ°•μ΅°] Representational State Transfer [/κ°•μ΅°]μ μ•½μμ…λ‹λ‹¤."
```

---

## π› μ•λ ¤μ§„ μ΄μ

μ—†μ (ν„μ¬κΉμ§€ λ°κ²¬λ λ¬Έμ  μ—†μ)

---

## π“ μ§€μ›

λ¬Έμ  λ°μƒ μ‹:
1. GitHub Issues: https://github.com/turtlesoup0/obsidian-tts/issues
2. μ½μ†”(F12) λ΅κ·Έ ν™•μΈ
3. Azure Functions λ΅κ·Έ μ¤νΈλ¦¬λ°:
   ```bash
   func azure functionapp logstream <your-function-app-name>
   ```

---

## π™ κ°μ‚¬μ λ§

v4.0 κ°λ°μ— κΈ°μ—¬ν•΄μ£Όμ‹  λ¶„λ“¤κ» κ°μ‚¬λ“λ¦½λ‹λ‹¤:
- Claude Sonnet 4.5 (κ°λ° μ§€μ›)
- Azure Cognitive Services ν€
- Obsidian μ»¤λ®¤λ‹ν‹°

---

**λ²„μ „**: 4.0.0
**λ¦΄λ¦¬μ¤ μΌμ**: 2026-01-22
**λ‹¤μ κ³„ν**: v4.1μ—μ„ μμ„± μ„ νƒ κΈ°λ¥ μ¶”κ°€ μμ •
